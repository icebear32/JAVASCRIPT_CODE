<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript">
			function check() {
				// alert("check");

				var username = document.getElementById("username"); //得到usernamede的网页的某个元素

				var usernameMsg = document.getElementById("usernameMsg"); //得到usernameMsg的网页的某个元素
				var emailMsg = document.getElementById("emailMsg"); //usernameMsg
				var passwordMsg = document.getElementById("passwordMsg"); //usernameMsg

				// console.log(username);
				// console.log(username.value);

				var isPass = true; //设置一个变量来判断每个校验环节是否全部通过

				// 用户名的检验
				var length = username.value.length;
				// if (length >= 3 && length <= 6) {

				// } else {
				// 	alert("用户名长度必须是3-6位");
				// }
				if (length < 3 || length > 6) {
					// alert("用户名长度必须是3-6位");
					usernameMsg.innerText = "用户名长度必须是3-6位"; //通过 innerText 修改 font 标签里的内容
					isPass = false;
				} else {
					usernameMsg.innerText = "";
				}

				// 邮箱的检验
				var email = document.getElementById("email").value;
				var p = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
				// p.test(email);
				if (p.test(email) == false) {
					// alert("邮箱格式不正确");
					emailMsg.innerText = "邮箱格式不正确";
					isPass = false;
				} else {
					emailMsg.innerText = "";
				}

				// 密码的检验
				var password = document.getElementById("password").value;
				var rePassword = document.getElementById("rePassword").value;
				if (password.length < 6 || password.length > 10) {
					// alert("密码必须在6-10位之间");
					passwordMsg.innerText = "密码必须在6-10位之间"
					isPass = false;
				} else {
					if (password != rePassword) {
						// alert("两次输入密码不一致");
						passwordMsg.innerText = "两次输入密码不一致";
						isPass = false;
					} else {
						passwordMsg.innerText = "";
					}
				}

				// return false; //暂时不用提交到register.jsp文件
				// if (isPass == false) {
				// 	isPass = false;
				// } else {
				// 	isPass = true;
				// }
				//简化代码
				return isPass; //返回判断检验的变量，是否全部通过

			}

			//onblur 失去焦点的时候调用
			// function checkUsername() {
			// 	var username = document.getElementById("username");
			// 	var usernameMsg = document.getElementById("usernameMsg");

			// 	var length = username.value.length;
			// 	if (length < 3 || length > 6) {
			// 		usernameMsg.innerText = "用户名长度必须是3-6位";
			// 	} else {
			// 		usernameMsg.innerText = "";
			// 	}
			// }
			//使用 this 传入的值，就不用 document.getElementById 去获得 用户名 的元素 username
			function checkUsername(username) {
				// var username = document.getElementById("username");
				var usernameMsg = document.getElementById("usernameMsg");

				var length = username.value.length;
				if (length < 3 || length > 6) {
					usernameMsg.innerText = "用户名长度必须是3-6位";
				} else {
					usernameMsg.innerText = "";
				}
			}

			function checkEmail(email) {
				var emailMsg = document.getElementById("emailMsg");
				var p = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
				if (p.test(email.value) == false) {	//email.value是因为传入的是一个对象，要使用对象的值
					emailMsg.innerText = "邮箱格式不正确";
				} else {
					emailMsg.innerText = "";
				}
			}

			function checkPassword() {
				var passwordMsg = document.getElementById("passwordMsg");
				var password = document.getElementById("password");
				var rePassword = document.getElementById("rePassword").value;
				if (password.value.length < 6 || password.value.length > 10) {
					passwordMsg.innerText = "密码必须在6-10位之间"
					isPass = false;
				} else {
					passwordMsg.innerText = ""
					if (password.value != rePassword) {
						passwordMsg.innerText = "两次输入密码不一致";
						isPass = false;
					} else {
						passwordMsg.innerText = "";
					}
				}
			}
		</script>
	</head>
	<body>
		<!-- onsubmit="check()" 表单提交的时候，触发事件，会调用check函数 -->
		<!-- action="register.jsp" 内容提交到register.jsp 文件 -->
		<form action="register.jsp" onsubmit="check()">
			<table border="1" width="500px" height="500px">
				<tr>
					<td colspan="2" align="center">注册</td>
				</tr>
				<tr>
					<td align="right">用户名：</td>
					<td align="left">
						<!-- onblur 失去焦点的时候调用
							onblur 事件：当用户离开input输入框时执行一段Javascript代码：
						 -->
						<!-- <input type="text" id="username" onblur="checkUsername()" /> -->
						<input type="text" id="username" onblur="checkUsername(this)" />
						<!-- this直接就是使用输入的username的值，传入checkUsername函数 -->
						<font color="red" id="usernameMsg"></font><!-- 用户在输入用户名信息时错误的提示信息 -->
					</td>
				</tr>
				<tr>
					<td align="right">邮箱：</td>
					<td>
						<!-- <input type="text" id="email" /> -->
						<input type="text" id="email" onblur="checkEmail(this)" />
						<font color="red" id="emailMsg"></font>
					</td>
				</tr>
				<tr>
					<td align="right">密码：</td>
					<td>
						<!-- <input type="password" id="password" /> -->
						<input type="password" id="password" onblur="checkPassword()" />
						<font color="red" id="passwordMsg"></font>
					</td>
				</tr>
				<tr>
					<td align="right">重复密码：</td>
					<td>
						<!-- <input type="password" id="rePassword" /> -->
						<input type="password" id="rePassword" onblur="checkPassword()" />
					</td>
				</tr>
				<tr>
					<td colspan="2" align="center">
						<input type="submit" value="注册" />
					</td>
				</tr>
		</form>
	</body>
</html>
